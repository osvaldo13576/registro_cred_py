<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestión de Créditos</title>
    <link rel="stylesheet" href="styles/styles.css">
    <!-- Chart.js CDN facilitando la creación de gráficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Sistema de Gestión de Créditos</h1>
        </header>
        <!-- sección de gráficos -->
        <section class="charts-section">
            <h2>Dashboard de créditos</h2>
            
            <div class="charts-container">
                <div class="chart-box">
                    <h3>Total de Créditos Otorgados</h3>
                    <canvas id="totalChart"></canvas>
                </div>
                
                <div class="chart-box">
                    <h3>Distribución por Cliente (Top 5)</h3>
                    <canvas id="clientesChart"></canvas>
                </div>
                
                <div class="chart-box">
                    <h3>Distribución por Monto</h3>
                    <canvas id="montosChart"></canvas>
                </div>
            </div>
        </section>
        <!-- Formulario para registrar créditos -->
        <section class="form-section">
            <h2>Registrar nuevo crédito</h2>
            <form id="creditoForm" class="credito-form">
                <div class="form-group">
                    <label for="cliente">Cliente *</label>
                    <input type="text" id="cliente" name="cliente" required> <!-- se agrega required para que el campo sea obligatorio -->
                    <span class="error-message" id="clienteError"></span>
                </div>

                <div class="form-group">
                    <label for="monto">Monto del crédito ($) *</label>
                    <input type="number" id="monto" name="monto" step="0.01" min="0" required> <!-- se agrega required para que el campo sea obligatorio -->
                    <span class="error-message" id="montoError"></span>
                </div>

                <div class="form-group">
                    <label for="tasa_interes">Tasa de Interés Anual (%) *</label>
                    <input type="number" id="tasa_interes" name="tasa_interes" step="0.01" min="0" required> <!-- se agrega required para que el campo sea obligatorio -->
                    <span class="error-message" id="tasaInteresError"></span>
                </div>

                <div class="form-group">
                    <label for="plazo">Plazo (meses) *</label>
                    <input type="number" id="plazo" name="plazo" min="1" required> <!-- se agrega required para que el campo sea obligatorio -->
                    <span class="error-message" id="plazoError"></span>
                </div>

                <div class="form-group">
                    <label for="fecha_otorgamiento">Fecha de Otorgamiento *</label>
                    <input 
                    type="date" 
                    id="fecha_otorgamiento" 
                    name="fecha_otorgamiento" 
                    pattern="\d{4}-\d{2}-\d{2}" 
                    required>
                    <span class="error-message" id="fechaError"></span>  <!-- el pattern ayuda a validar el formato de fecha -->
                </div>

                <input type="hidden" id="creditoId">

                <div class="form-buttons">
                    <button type="submit" id="submitBtn">Guardar Crédito</button>
                    <button type="button" id="cancelBtn" style="display: none;">Cancelar</button>
                </div>
            </form>
        </section>

        <!-- Sección para listar créditos -->
        <section class="list-section">
            <h2>Lista de Créditos Registrados</h2>
            
            <div class="filters">
                <input type="text" id="searchInput" placeholder="Buscar por cliente.">
            </div>

            <div class="table-container">
                <table id="creditosTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Cliente</th>
                            <th>Monto</th>
                            <th>Tasa Interés</th>
                            <th>Plazo</th>
                            <th>Fecha Otorgamiento</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="creditosBody">
                        <!-- Los créditos se cargarán aquí dinámicamente -->
                    </tbody>
                </table>
            </div>

            <div class="table-info" id="tableInfo">
                Mostrando 0 créditos
            </div>
        </section>
    </div>

    <!-- Modal de confirmación -->
    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <h3>¿Estás seguro?</h3>
            <p id="modalMessage">Esta acción no se puede deshacer.</p>
            <div class="modal-buttons">
                <button id="modalConfirmBtn">Sí, eliminar</button>
                <button id="modalCancelBtn">Cancelar</button>
            </div>
        </div>
    </div>

    <script src="scripts/graficos.js"></script>
    <script src="scripts/app.js"></script>
    
</body>
</html>